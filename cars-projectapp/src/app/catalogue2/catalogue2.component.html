<!-- Nav bar-->
<nav class="navbar navbar-expand-sm navbar-dark bg-dark">
  <div class="container-fluid">
    <a routerLink="/" class="navbar-brand">Four wheels Car Renter</a>
    <div class="collapse navbar-collapse" id="mynavbar">
      <ul class="navbar-nav me-auto">
        <li class="nav-item">
          <a routerLink="/" class="nav-link">Page d'accueil</a>
        </li>
        <li class="nav-item">
          <a class="nav-link">Inscription</a>
        </li>
        <li class="nav-item">
          <a class="nav-link">Connexion</a>
        </li>
      </ul>
      <form class="d-flex">
        <input
          class="form-control me-2"
          type="text"
          name="key"
          (ngModelChange)="searchCars(key.value)"
          #key="ngModel"
          ngModel
          id="searchCar"
          placeholder="Search for cars..."
        />
        <button class="btn btn-primary" type="button">Search</button>
      </form>
    </div>
  </div>
</nav>
<!-- Body Cards-->
<div class="container-fluid d-flex justify-content-center bg-light">
  <div *ngFor="let car of cars" class="row mt-5">
    <div class="col-sm-4">
      <div class="card mx-4 bg-info shadow-lg p-1 mb-1 bg-dark">
        <img src="{{ car.imageUrl }}" class="card-img-top" />
        <div class="card-body pt-0 px-0">
          <hr class="mt-2 mx-3 bg-white" />
          <div class="d-flex flex-row justify-content-between mb-0 px-3">
            <h6 class="mt-1 text-light">Voiture : {{ car.name }}</h6>
          </div>
          <hr class="mt-2 mx-3 bg-white" />
          <div class="d-flex flex-row justify-content-between mb-0 px-3">
            <h6 class="mt-1 text-light">Prix de location</h6>
            <small class="text-light">&euro;22,495 / day</small>
          </div>
          <hr class="mt-2 mx-3 bg-white" />
          <div class="d-flex flex-row justify-content-between px-3 pb-4">
            <div class="d-flex flex-column">
              <span class="text-light">Fuel Efficiency</span
              ><small class="text-light">L/100KM&ast;</small>
            </div>
            <div class="d-flex flex-column">
              <h5 class="mb-0 text-light">8.5/7.1</h5>
              <small class="text-right text-light">(city/Hwy)</small>
            </div>
          </div>
          <hr class="mt-2 mx-3 bg-white" />
          <div class="d-flex flex-row justify-content-between p-3 mid">
            <div class="d-flex flex-column">
              <small class="mb-1">ENGINE</small>
              <div class="d-flex flex-row">
                <img
                  src="https://imgur.com/iPtsG7I.png"
                  width="35px"
                  height="25px"
                />
                <div class="d-flex flex-column ml-1">
                  <small class="ghj">1.4L MultiAir</small
                  ><small class="ghj">16V I-4 Turbo</small>
                </div>
              </div>
            </div>
            <div class="d-flex flex-column">
              <small class="mb-2">HORSEPOWER</small>
              <div class="d-flex flex-row">
                <img src="https://imgur.com/J11mEBq.png" />
                <h6 class="ml-1">135 hp&ast;</h6>
              </div>
            </div>
          </div>
          <div class="mx-3 mt-3 mb-2">
            <!-- Button trigger modal -->
            <button
              type="button"
              class="btn btn-danger btn-primary"
              data-bs-toggle="modal"
              data-bs-target="#viewCarModal"
              (click)="onSelectCar(car)"
            >
              <small>Afficher détails</small>
            </button>
            <button
              [hidden]="true"
              type="button"
              id="openCarInfo"
              data-toggle="modal"
              data-target="#viewCarModal"
            ></button>
            <!-- Modal -->
            <div
              class="modal fade"
              id="viewCarModal"
              tabindex="-1"
              aria-labelledby="exampleModalLabel"
              aria-hidden="true"
            >
              <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                  <!-- Modal Header -->
                  <div class="modal-header">
                    <h4 class="modal-title">
                      {{ selectedCar?.name }}
                    </h4>
                    <button type="button" class="close" data-dismiss="modal">
                      &times;
                    </button>
                  </div>
                  <!-- Modal body -->
                  <div class="modal-body">
                    <div class="container">
                      <h6>
                        Voiture selectionnée: {{ selectedCar?.description }}
                      </h6>
                      <div class="row">
                        <div class="col">
                          <img
                            src="{{ selectedCar?.imageUrl }}"
                            class="card-img-top"
                            width="100%"
                          />
                        </div>
                      </div>
                      <h6>Car Details</h6>
                      <div class="row">
                        <div class="col-xs-6">
                          <ul type="none">
                            <li class="left">
                              Energie: {{ selectedCar?.energie }}
                            </li>
                            <li class="left">
                              Nombre de places: {{ selectedCar?.nbPlaces }}
                            </li>
                            <li class="left">
                              Kilométrage: {{ selectedCar?.kilometrage }}
                            </li>
                            <li class="left">
                              Boite à Vitesse: {{ selectedCar?.boiteAvitesse }}
                            </li>
                            <li class="left">
                              Total Price: {{ selectedCar?.description }}
                            </li>
                          </ul>
                        </div>
                      </div>
                      <h6>Owner Details</h6>
                      <div class="row" style="border-bottom: none">
                        <div class="col-xs-6">
                          <ul type="none">
                            <li class="left">
                              Nom : {{ selectedCar?.carOwner?.username }}
                            </li>
                            <li class="left">
                              Localisation :
                              {{ selectedCar?.carOwner?.localisation }}
                            </li>
                            <li class="left">
                              Phone : {{ selectedCar?.carOwner?.phoneNumber }}
                            </li>
                          </ul>
                        </div>
                      </div>
                    </div>
                  </div>
                  <!-- Modal footer -->
                  <div class="modal-footer">
                    <button type="button" class="btn">Track order</button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
